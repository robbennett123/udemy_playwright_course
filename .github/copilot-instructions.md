# Playwright Test Automation - AI Agent Instructions

## Project Overview
This is a Playwright end-to-end test automation suite for the udemy_playwright_course. The project uses Playwright for cross-browser testing and TypeScript for type-safe test scripts.

## Key Architecture & Design Patterns

### Test Structure
- **Test Location**: All test files live in `tests/` directory with `.spec.ts` extension
- **Test Runner**: Playwright's built-in test runner (configured in `playwright.config.ts`)
- **Test Pattern**: Each test file is independent; uses Playwright's fixture-based architecture with `test()` blocks
- **Async/Await Pattern**: All tests are async functions; navigation and interactions must use `await`

### Example Pattern from `example.spec.ts`:
```typescript
test('has title', async ({ page }) => {
  await page.goto('https://playwright.dev/');
  await expect(page).toHaveTitle(/Playwright/);
});
```

## Critical Developer Workflows

### Running Tests
```bash
npx playwright test              # Run all tests
npx playwright test --ui         # Interactive UI mode
npx playwright test tests/home.spec.ts  # Run specific file
```

### Browser Configuration
- **Default Browsers**: Chromium, Firefox, WebKit (configured in `playwright.config.ts`)
- **Parallel Execution**: Enabled by default (`fullyParallel: true`)
- **CI Mode**: Retries (2x), single worker, forbids `test.only` in code
- **Reports**: HTML report generated by default (view with `npx playwright show-report`)

### Debugging
```bash
npx playwright test --debug     # Step through tests
npx playwright test --headed    # See browser window
```

## Project-Specific Conventions

### Naming & Organization
1. **Test files**: Use `.spec.ts` suffix (e.g., `home.spec.ts`, `example.spec.ts`)
2. **One concern per file**: Group related tests in single spec file
3. **Page selectors**: Use Playwright's role-based selectors (`.getByRole()`) preferred over CSS selectors for accessibility

### Test Isolation
- Each test receives fresh `page` fixture (browser context is reset)
- No test interdependencies - tests must be independently executable
- Do not share state between test cases

### Tracing & Debugging
- **Trace Collection**: Enabled on first retry (`trace: 'on-first-retry'`)
- View traces: `npx playwright show-trace trace.zip`

## Dependencies & External Integration

### Core Dependencies
- `@playwright/test`: ^1.57.0 - Main test framework
- `@types/node`: ^25.0.3 - TypeScript node type definitions

### Configuration Notes
- **Base URL**: Currently commented out in `playwright.config.ts` - uncomment to set default navigation URL
- **Web Server**: Currently disabled - uncomment `webServer` config to auto-start dev server before tests
- **Environment Variables**: `.env` loading is commented out - use if credentials/secrets needed

## Common Tasks for AI Agents

### Adding a New Test
1. Create file: `tests/newfeature.spec.ts`
2. Import Playwright test utilities: `import { test, expect } from '@playwright/test'`
3. Write tests using Playwright's page fixture and role-based selectors
4. Follow async/await pattern; no callbacks

### Extending Configurations
- **Adding a Browser**: Edit `projects[]` in `playwright.config.ts`
- **Custom Reporters**: Add to `reporter` field (default: 'html')
- **Retries**: Adjust `retries` value based on CI vs local environment

## Important Notes
- **No npm test command**: Package.json has empty scripts - use `npx playwright` directly
- **TypeScript Required**: All tests must be `.ts` files; CommonJS module type is configured
- **test.only Forbidden in CI**: Never commit tests with `.only` suffix if running on CI pipeline
